---
- !policy 
  id: analytics/v1
  annotations:
    description: Manages permissions within the data analysis webservice
  body:
    - !webservice
      annotations:
        description: HTTP traffic is controlled from permissions on this webservice

    - !layer
      annotations:
        description: Hosts in this layer can fetch all 'analytics/v1' variables

    - !layer
      id: data-producers
      annotations:
        description: Hosts which produce analytical data

    - !permit
      role: !layer
      privilege:
        - post
        - get
        - put
        - delete
      resource: !webservice
      
    - !permit
      role: !layer data-producers
      privilege: put
      resource: !webservice
