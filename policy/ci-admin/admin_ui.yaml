---
- !policy 
  id: jenkins/admin-ui/v1
  annotations:
      description: This policy declares secrets (via Conjur variables) which are available to Jenkins jobs located within the admin-ui Jenkins Folder.
  body:
    - !variable &access_key_id 
      id: cloud/access_key_id
      annotations:
        description: Admin UI Jenkins job api key to cloud service
    - !variable &secret_access_key 
      id: cloud/secret_access_key
      annotations:
        description: Admin UI Jenkins job secret access key
    - !group &secret-managers 
      id: secret-managers
      annotations:
        description: Members are able to update the value of all secrets within the policy
    - !host &job
      annotations:
        description: Host identity for running Jenkins jobs in Admin UI folder - can access Admin UI API keys
    - !permit
      role: *secret-managers
      privilege:
        - execute 
        - update
      resource: *access_key_id
    - !permit
      role: *secret-managers
      privilege: 
        - execute
        - update
      resource: *secret_access_key
    - !permit
      role: *job
      privilege: execute
      resource: *access_key_id
    - !permit
      role: *job
      privilege: execute
      resource: *secret_access_key
...